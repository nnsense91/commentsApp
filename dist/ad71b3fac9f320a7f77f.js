(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{321:function(t,e,n){},328:function(t,e,n){"use strict";var r=n(321);n.n(r).a},335:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"new-comment"},[n("form",{staticClass:"new-comment__form"},[n("h2",{staticClass:"new-comment__title"},[t._v("Добавить комментарий")]),n("div",{staticClass:"new-comment__content"},[n("div",{staticClass:"new-comment__form-row"},[n("label",{staticClass:"new-comment__label",attrs:{for:"name"}},[t._v("Имя")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.author,expression:"comment.author"}],staticClass:"new-comment__input",attrs:{type:"text",id:"name"},domProps:{value:t.comment.author},on:{blur:function(e){return t.checkValid(e.target.id)},input:function(e){e.target.composing||t.$set(t.comment,"author",e.target.value)}}}),n("validationError",{attrs:{error:t.errorMessage.name}})],1),n("div",{staticClass:"new-comment__form-row"},[n("label",{staticClass:"new-comment__label",attrs:{for:"email"}},[t._v("E-mail")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.comment.email,expression:"comment.email"}],staticClass:"new-comment__input",attrs:{type:"e-mail",id:"email"},domProps:{value:t.comment.email},on:{blur:function(e){return t.checkValid(e.target.id)},input:function(e){e.target.composing||t.$set(t.comment,"email",e.target.value)}}}),n("validationError",{attrs:{error:t.errorMessage.email}})],1),n("div",{staticClass:"new-comment__form-row"},[n("label",{staticClass:"new-comment__label",attrs:{for:"text"}},[t._v("Текст комментария")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.text,expression:"comment.text"}],staticClass:"new-comment__text",attrs:{id:"text"},domProps:{value:t.comment.text},on:{blur:function(e){return t.checkValid(e.target.id)},input:function(e){e.target.composing||t.$set(t.comment,"text",e.target.value)}}}),n("validationError",{attrs:{error:t.errorMessage.text}})],1),n("div",{staticClass:"new-comment__form-row"},[n("label",{staticClass:"new-comment__label"}),n("button",{staticClass:"new-comment__submit",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.addNewComment(e)}}},[t._v("Добавить комментарий")])])])])])};r._withStripped=!0;var a=n(63);function i(t,e,n,r,a,i,o){try{var m=t[i](o),s=m.value}catch(t){return void n(t)}m.done?e(s):Promise.resolve(s).then(r,a)}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=4,s={components:{validationError:function(){return n.e(7).then(n.bind(null,337))}},data:function(){return{errorMessage:{name:"",email:"",text:""},formInputValid:{name:!1,email:!1,text:!1},comment:{id:0,depth:1,addReply:!1,author:"",email:"",creationTime:"",rating:0,text:"",children:[]}}},props:{targetId:Number},methods:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){o(t,e,n[e])})}return t}({},Object(a.b)("comments",["addComment"]),{addNewComment:function(){var t,e=(t=regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isFormValid){t.next=18;break}return t.prev=1,this.comment.id=m,this.comment.creationTime=this.addCreationTime(),t.next=6,this.addComment([this.comment,this.targetId]);case 6:m++,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0.message),alert("Ошибка! Не удалось добавить комментарий.");case 13:return t.prev=13,this.closeAddCommentForm(),t.finish(13);case 16:t.next=21;break;case 18:this.checkValid("name"),this.checkValid("email"),this.checkValid("text");case 21:case"end":return t.stop()}},t,this,[[1,9,13,16]])}),function(){var e=this,n=arguments;return new Promise(function(r,a){var o=t.apply(e,n);function m(t){i(o,r,a,m,s,"next",t)}function s(t){i(o,r,a,m,s,"throw",t)}m(void 0)})});return function(){return e.apply(this,arguments)}}(),addCreationTime:function(){return(new Date).getTime()},closeAddCommentForm:function(){this.$emit("closeAddCommentForm")},checkValid:function(t){if("name"===t)this.comment.author=this.comment.author.trim(),""===this.comment.author?(this.formInputValid.name=!1,this.errorMessage.name="Поле обязательно к заполнению"):(this.formInputValid.name=!0,this.errorMessage.name="");else if("email"===t){this.comment.email=this.comment.email.trim();""===this.comment.email?this.errorMessage.email="Поле обязательно к заполнению":(e=this.comment.email,/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?(this.formInputValid.email=!0,this.errorMessage.email=""):(this.formInputValid.email=!1,this.errorMessage.email="Некорректный формат e-mail"))}else"text"===t&&(this.comment.text=this.comment.text.trim(),""===this.comment.text?(this.formInputValid.text=!1,this.errorMessage.text="Поле обязательно к заполнению"):(this.formInputValid.text=!0,this.errorMessage.text=""));var e}}),computed:{isFormValid:function(){return!(!0!==this.formInputValid.name||!0!==this.formInputValid.email||!this.formInputValid.text)}}},c=(n(328),n(92)),l=Object(c.a)(s,r,[],!1,null,"d132463a",null);l.options.__file="src/components/commentsAddNew.vue";e.default=l.exports}}]);